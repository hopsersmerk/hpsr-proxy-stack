# Configuración de Squid Proxy con HTTPS
# Puerto HTTPS con SSL
https_port 443 cert=/etc/letsencrypt/live/{DOMAIN}/fullchain.pem key=/etc/letsencrypt/live/{DOMAIN}/privkey.pem

# Autenticación básica
auth_param basic program /usr/lib/squid/basic_ncsa_auth /etc/squid/passwd
auth_param basic realm Proxy Authentication Required
auth_param basic credentialsttl 2 hours

# ACLs
acl authenticated proxy_auth REQUIRED
acl SSL_ports port 443
acl Safe_ports port 80
acl Safe_ports port 21
acl Safe_ports port 443
acl Safe_ports port 70
acl Safe_ports port 210
acl Safe_ports port 1025-65535
acl Safe_ports port 280
acl Safe_ports port 488
acl Safe_ports port 591
acl Safe_ports port 777
acl CONNECT method CONNECT

# Reglas de acceso
http_access deny !Safe_ports
http_access deny CONNECT !SSL_ports
http_access allow authenticated
http_access deny all

# Configuración de caché
cache deny all

# Logging
access_log /dev/stdout
cache_log /dev/stderr

# Sin mostrar versión de squid
httpd_suppress_version_string on

# Forward todo el tráfico
forwarded_for delete
via off
